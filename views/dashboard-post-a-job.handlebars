<!doctype html>
<html lang="en">

<head>

<!-- Basic Page Needs
================================================== -->
<title>Hireo</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<!-- CSS
================================================== -->
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/colors/blue.css">

<style>
	.error-border {
		border: solid 1px #dc3545 !important;
	};
</style>

</head>
<body class="gray">

<!-- Wrapper -->
<div id="wrapper">

<!-- Header Container
================================================== -->
<header id="header-container" class="fullwidth dashboard-header not-sticky">

	<!-- Header -->
	<div id="header">
		<div class="container">
			
			<!-- Left Side Content -->
			<div class="left-side">
				
				<!-- Logo -->
				<div id="logo">
					<a href="/"><img src="/images/logo.png" alt=""></a>
				</div>

				<!-- Main Navigation -->
				<nav id="navigation">
					<ul id="responsive">

						<li><a href="/">Home</a></li>

						<li><a href="#">Find Work</a>
							<ul class="dropdown-nav">
								<li><a href="/jobs">Browse Jobs</a>
								</li>
								<li><a href="/tasks">Browse Tasks</a>
									
								</li>
							</ul>
						</li>

						<li><a href="/companies">Companies</a></li>

						<li><a href="/freelancers">Freelancers</a></li>
					</ul>
				</nav>
				<div class="clearfix"></div>
				<!-- Main Navigation / End -->
				
			</div>
			<!-- Left Side Content / End -->


			<!-- Right Side Content / End -->
			<div class="right-side">
				{{#if data.user}}
				<!-- User Menu -->
				<div class="header-widget">

					<!-- Messages -->
					<div class="header-notifications user-menu">
						<div class="header-notifications-trigger">
							<a href="#"><div class="user-avatar status-online"><img src="/images/user-avatar-small-01.jpg" alt=""></div></a>
						</div>

						<!-- Dropdown -->
						<div class="header-notifications-dropdown">

							<!-- User Status -->
							<div class="user-status">

								<!-- User Name / Avatar -->
								<div class="user-details">
									<div class="user-avatar status-online"><img src="/images/user-avatar-small-01.jpg" alt=""></div>
									{{#equal data.user.role 'freelancer'}}
									<div class="user-name">
										{{data.user.first_name}} {{data.user.last_name}} <span>Freelancer</span>
									</div>
									{{/equal}}
									{{#equal data.user.role 'employer'}}
									<div class="user-name">
										{{data.user.name}}<span>Employer</span>
									</div>
									{{/equal}}
								</div>
								
								<!-- User Status Switcher -->
								<div class="status-switch" id="snackbar-user-status">
									<label class="user-online current-status">Online</label>
									<label class="user-invisible">Invisible</label>
									<!-- Status Indicator -->
									<span class="status-indicator" aria-hidden="true"></span>
								</div>	
						</div>
						
						<ul class="user-menu-small-nav">
							<li><a href="/dashboard"><i class="icon-material-outline-dashboard"></i> Dashboard</a></li>
							<li><a href="/dashboard_settings"><i class="icon-material-outline-settings"></i> Settings</a></li>
							<li><a href="/" id="logOut"><i class="icon-material-outline-power-settings-new"></i> Logout</a></li>
						</ul>

						</div>
					</div>

				</div>
				<!-- User Menu / End -->
				{{else}}
			
				<div class="header-widget">
					<a href="#sign-in-dialog" id="register-btn" class="popup-with-zoom-anim log-in-button"><i class="icon-feather-log-in"></i> <span>Log In / Register</span></a>
				</div>
				{{/if}}
				<!-- Mobile Navigation Button -->
				<span class="mmenu-trigger">
					<button class="hamburger hamburger--collapse" type="button">
						<span class="hamburger-box">
							<span class="hamburger-inner"></span>
						</span>
					</button>
				</span>

			</div>
			<!-- Right Side Content / End -->

		</div>
	</div>
	<!-- Header / End -->

</header>
<div class="clearfix"></div>
<!-- Header Container / End -->


<!-- Dashboard Container -->
<div class="dashboard-container">

	<!-- Dashboard Sidebar
	================================================== -->
	<div class="dashboard-sidebar">
		<div class="dashboard-sidebar-inner" data-simplebar>
			<div class="dashboard-nav-container">

				<!-- Responsive Navigation Trigger -->
				<a href="#" class="dashboard-responsive-nav-trigger">
					<span class="hamburger hamburger--collapse" >
						<span class="hamburger-box">
							<span class="hamburger-inner"></span>
						</span>
					</span>
					<span class="trigger-title">Dashboard Navigation</span>
				</a>
				
				<!-- Navigation -->
				<div class="dashboard-nav">
					<div class="dashboard-nav-inner">

						<ul data-submenu-title="Start">
							<li><a href="/dashboard"><i class="icon-material-outline-dashboard"></i> Dashboard</a></li>
							<li><a href="/reviews/my_reviews"><i class="icon-material-outline-rate-review"></i> Reviews</a></li>
						</ul>
						
						{{#equal data.user.role 'employer'}}
						<ul data-submenu-title="Organize and Manage">
							<li class="active-submenu"><a href="#"><i class="icon-material-outline-business-center"></i> Jobs</a>
								<ul>
									<li><a href="/jobs/my_jobs">Manage Jobs <span class="nav-tag">{{data.user.jobs.length}}</span></a></li>
									<li><a href="/jobs/candidates">Manage Candidates</a></li>
									<li><a href="/jobs/create">Post a Job</a></li>
								</ul>	
							</li>
							<li><a href="#"><i class="icon-material-outline-assignment"></i> Tasks</a>
								<ul>
									<li><a href="/tasks/my_tasks">Manage Tasks <span class="nav-tag">{{data.user.tasks.length}}</span></a></li>
									<li><a href="/tasks/bidders">Manage Bidders</a></li>
									<li><a href="/tasks/create">Post a Task</a></li>
								</ul>	
							</li>
						</ul>
						{{/equal}}

						{{#equal data.user.role 'freelancer'}}
						<ul data-submenu-title="Organize and Manage">
							<li><a href="#"><i class="icon-material-outline-assignment"></i> Tasks</a>
								<ul>
									<li><a href="/tasks/my_tasks">Manage Tasks <span class="nav-tag">{{data.user.tasks.length}}</span></a></li>
									<li><a href="/tasks/my_bids">My Active Bids </a></li>
								</ul>	
							</li>
						</ul>
						{{/equal}}

						<ul data-submenu-title="Account">
							<li><a href="/dashboard_settings"><i class="icon-material-outline-settings"></i> Settings</a></li>
							<li><a href="/" id="logOut"><i class="icon-material-outline-power-settings-new"></i> Logout</a></li>
						</ul>
						
					</div>
				</div>
				<!-- Navigation / End -->

			</div>
		</div>
	</div>
	<!-- Dashboard Sidebar / End -->


	<!-- Dashboard Content
	================================================== -->
	<div class="dashboard-content-container" data-simplebar>
		<div class="dashboard-content-inner" >
			
			<!-- Dashboard Headline -->
			<div class="dashboard-headline">
				<h3>Post a Job</h3>

				<!-- Breadcrumbs -->
				<nav id="breadcrumbs" class="dark">
					<ul>
						<li><a href="#">Home</a></li>
						<li><a href="#">Dashboard</a></li>
						<li>Post a Job</li>
					</ul>
				</nav>
			</div>
	
			<!-- Row -->
			<div class="row">

				<!-- Dashboard Box -->
				<div class="col-xl-12">
					<div class="dashboard-box margin-top-0">

						<!-- Headline -->
						<div class="headline">
							<h3 id="submit-success"><i class="icon-feather-folder-plus"></i> Job Submission Form</h3>
						</div>

						<div class="content with-padding padding-bottom-10">
							<div class="row">

								<div class="col-xl-4">
									<div class="submit-field">
										<h5>Job Title</h5>
										<input type="text" class="with-border" id="job-title">
									</div>
								</div>

								<div class="col-xl-4">
									<div class="submit-field">
										<h5>Job Type</h5>
										<select id="job-type"class="selectpicker with-border" data-size="7" title="Select Job Type">
											<option>Full Time</option>
											<option>Freelance</option>
											<option>Part Time</option>
											<option>Internship</option>
											<option>Temporary</option>
										</select>
									</div>
								</div>

								<div class="col-xl-4">
									<div class="submit-field">
										<h5>Job Category</h5>
										<select id="job-category"class="selectpicker with-border" data-size="7" title="Select Category">
											{{#each categories}}
											<option value="{{this._id}}">{{this.title}}</option>
											{{/each}}
										</select>
									</div>
								</div>

								<div class="col-xl-4">
									<div class="submit-field">
										<h5>Location</h5>
										<div class="input-with-icon">
											<div id="autocomplete-container">
												<input id="autocomplete-input" class="with-border" type="text" placeholder="Type Address">
											</div>
											<i class="icon-material-outline-location-on"></i>
										</div>
									</div>
								</div>

								<div class="col-xl-4">
									<div class="submit-field">
										<h5>Salary</h5>
										<div class="row">
											<div class="col-xl-6">
												<div class="input-with-icon">
													<input id="job-min" class="with-border" type="text" placeholder="Min">
													<i class="currency">USD</i>
												</div>
											</div>
											<div class="col-xl-6">
												<div class="input-with-icon">
													<input id="job-max" class="with-border" type="text" placeholder="Max">
													<i class="currency">USD</i>
												</div>
											</div>
										</div>
									</div>
								</div>

								<div class="col-xl-4">
									<div class="submit-field">
										<h5>Tags <span>(optional)</span>  <i class="help-icon" data-tippy-placement="right" title="Maximum of 10 tags"></i></h5>
										<div class="keywords-container">
											<div class="keyword-input-container">
												<input type="text" class="keyword-input with-border" placeholder="e.g. job title, responsibilites"/>
												<button class="keyword-input-button ripple-effect"><i class="icon-material-outline-add"></i></button>
											</div>
											<div class="keywords-list"><!-- keywords go here --></div>
											<div class="clearfix"></div>
										</div>

									</div>
								</div>

								<div class="col-xl-12">
									<div class="submit-field">
										<h5>Job Description</h5>
										<textarea id="job-desc" cols="30" rows="5" class="with-border"></textarea>
									</div>
								</div>

							</div>
						</div>
					</div>
				</div>

				<div class="col-xl-12">
					<a href="#" id="job-submit" class="button ripple-effect big margin-top-30"><i class="icon-feather-plus"></i> Post a Job</a>
				</div>

			</div>
			<!-- Row / End -->

			<!-- Footer -->
			<div class="dashboard-footer-spacer"></div>
			<div class="small-footer margin-top-15">
				<div class="small-footer-copyrights">
					Â© 2019 <strong>Hireo</strong>. All Rights Reserved.
				</div>
				<ul class="footer-social-links">
					<li>
						<a href="#" title="Facebook" data-tippy-placement="top">
							<i class="icon-brand-facebook-f"></i>
						</a>
					</li>
					<li>
						<a href="#" title="Twitter" data-tippy-placement="top">
							<i class="icon-brand-twitter"></i>
						</a>
					</li>
					<li>
						<a href="#" title="Google Plus" data-tippy-placement="top">
							<i class="icon-brand-google-plus-g"></i>
						</a>
					</li>
					<li>
						<a href="#" title="LinkedIn" data-tippy-placement="top">
							<i class="icon-brand-linkedin-in"></i>
						</a>
					</li>
				</ul>
				<div class="clearfix"></div>
			</div>
			<!-- Footer / End -->

		</div>
	</div>
	<!-- Dashboard Content / End -->

</div>
<!-- Dashboard Container / End -->

</div>
<!-- Wrapper / End -->


<!-- Scripts
================================================== -->
<script src="/js/jquery-3.4.1.min.js"></script>
<script src="/js/jquery-migrate-3.1.0.min.html"></script>
<script src="/js/mmenu.min.js"></script>
<script src="/js/tippy.all.min.js"></script>
<script src="/js/simplebar.min.js"></script>
<script src="/js/bootstrap-slider.min.js"></script>
<script src="/js/bootstrap-select.min.js"></script>
<script src="/js/snackbar.js"></script>
<script src="/js/clipboard.min.js"></script>
<script src="/js/counterup.min.js"></script>
<script src="/js/magnific-popup.min.js"></script>
<script src="/js/slick.min.js"></script>
<script src="/js/custom.js"></script>

<!-- Snackbar // documentation: https://www.polonel.com/snackbar/ -->
<script>
// Snackbar for user status switcher
$('#snackbar-user-status label').click(function() { 
	Snackbar.show({
		text: 'Your status has been changed!',
		pos: 'bottom-center',
		showAction: false,
		actionText: "Dismiss",
		duration: 3000,
		textColor: '#fff',
		backgroundColor: '#383838'
	}); 
}); 
</script>

<!-- Chart.js // documentation: http://www.chartjs.org/docs/latest/ -->
<script src="js/chart.min.js"></script>
<script>
	Chart.defaults.global.defaultFontFamily = "Nunito";
	Chart.defaults.global.defaultFontColor = '#888';
	Chart.defaults.global.defaultFontSize = '14';

	var ctx = document.getElementById('chart').getContext('2d');

	var chart = new Chart(ctx, {
		type: 'line',

		// The data for our dataset
		data: {
			labels: ["January", "February", "March", "April", "May", "June"],
			// Information about the dataset
	   		datasets: [{
				label: "Views",
				backgroundColor: 'rgba(42,65,232,0.08)',
				borderColor: '#2a41e8',
				borderWidth: "3",
				data: [196,132,215,362,210,252],
				pointRadius: 5,
				pointHoverRadius:5,
				pointHitRadius: 10,
				pointBackgroundColor: "#fff",
				pointHoverBackgroundColor: "#fff",
				pointBorderWidth: "2",
			}]
		},

		// Configuration options
		options: {

		    layout: {
		      padding: 10,
		  	},

			legend: { display: false },
			title:  { display: false },

			scales: {
				yAxes: [{
					scaleLabel: {
						display: false
					},
					gridLines: {
						 borderDash: [6, 10],
						 color: "#d8d8d8",
						 lineWidth: 1,
	            	},
				}],
				xAxes: [{
					scaleLabel: { display: false },  
					gridLines:  { display: false },
				}],
			},

		    tooltips: {
		      backgroundColor: '#333',
		      titleFontSize: 13,
		      titleFontColor: '#fff',
		      bodyFontColor: '#fff',
		      bodyFontSize: 13,
		      displayColors: false,
		      xPadding: 10,
		      yPadding: 10,
		      intersect: false
		    }
		},


});

</script>


<!-- Google Autocomplete -->
<script>
	function initAutocomplete() {
		 var options = {
		  types: ['(cities)'],
		  // componentRestrictions: {country: "us"}
		 };

		 var input = document.getElementById('autocomplete-input');
		 var autocomplete = new google.maps.places.Autocomplete(input, options);

		if ($('.submit-field')[0]) {
		    setTimeout(function(){ 
		        $(".pac-container").prependTo("#autocomplete-container");
		    }, 300);
		}
	}
</script>

<script>
	$('#job-title').on('focus', () => {
		$('#job-title').removeClass('error-border');
	});

	$('#autocomplete-input').on('focus', () => {
		$('#autocomplete-input').removeClass('error-border');
	});

	$('#job-min').on('focus', () => {
		$('#job-min').removeClass('error-border');
	});

	$('#job-max').on('focus', () => {
		$('#job-max').removeClass('error-border');
	});

	$('#job-desc').on('focus', () => {
		$('#job-desc').removeClass('error-border');
	});

	$('#job-submit').on('click', () => {
		const title = $('#job-title').val();
		const type = $('#job-type option:selected').text();
		const category = $('#job-category option:selected').val();
		const location = $('#autocomplete-input').val();
		const min = $('#job-min').val();
		const max = $('#job-max').val();
		const tags = [];
		$('.keyword-text').each((index, element) => {
			tags.push($(element).text());
		});
		const description = $('#job-desc').val();
		if (!title) {
			$('#job-title').addClass('error-border');
		}

		if (!location) {
			$('#autocomplete-input').addClass('error-border');
		}

		if (!min || typeof parseInt(min) !== 'number') {
			$('#job-min').addClass('error-border');
		}

		if (!max || typeof parseInt(max) !== 'number') {
			$('#job-max').addClass('error-border');
		}

		if (!description) {
			$('#job-desc').addClass('error-border');
		}

		if (title && type !== 'Select Job Type' && category !== 'Select Category' && location && min && max && description) {
			$.ajax({
				url: '/jobs',
				method: 'POST',
				data: JSON.stringify({
					title,
					type,
					category,
					location,
					min,
					max,
					description,
					tags,
				}),
				contentType: 'application/json',
				success: (data, status, xhr) => {
					$('#submit-success').text('Your Job Posted');
					$('#job-title').val('');
					$('#autocomplete-input').val('');
					$('#job-min').val('');
					$('#job-max').val('');
					$('#job-desc').val('');
					$('.keyword').remove();
				},
				error: (xhr, status, err) => {
					window.location = '/dashboard_settings';
				},
			});
		}
	});

	$('#logOut').on('click', () => {
		$.ajax({
			url: '/logout',
			method: 'GET',
			success: (data, status, xhr) => {
				window.location.href = '/';
			}
		});
	});
</script>

</body>
</html>